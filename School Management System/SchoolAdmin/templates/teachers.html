{% extends 'header_footer.html' %}
{% block content %}
{% load static %}
{% load poll_extras %}

         <div class="page-wrapper">
            <div class="content container-fluid">
               <div class="page-header">
                  <div class="row align-items-center">
                     <div class="col">
                        <h3 class="page-title">Teachers</h3>
                        <ul class="breadcrumb">
                           <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                           <li class="breadcrumb-item active">Teachers</li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="student-group-form">
                  <div class="row">
                     <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                           <input type="text" class="form-control" placeholder="Search by ID ...">
                        </div>
                     </div>
                     <div class="col-lg-3 col-md-6">
                        <div class="form-group">
                           <input type="text" class="form-control" placeholder="Search by Name ...">
                        </div>
                     </div>
                     <div class="col-lg-4 col-md-6">
                        <div class="form-group">
                           <input type="text" class="form-control" placeholder="Search by Phone ...">
                        </div>
                     </div>
                     <div class="col-lg-2">
                        <div class="search-student-btn">
                           <button type="btn" class="btn btn-primary">Search</button>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-sm-12">
                     <div class="card card-table">
                        <div class="card-body">
                           <div class="page-header">
                              <div class="row align-items-center">
                                 <div class="col">
                                    <h3 class="page-title">Teachers List </h3>
                                 </div>
                                 <div class="col-auto text-end float-end ms-auto download-grp">
                                   
                                 
                                    <a href="{% url "addTeacher" %}" class="btn btn-primary"><i class="fas fa-plus"></i></a>
                                 </div>
                              </div>
                           </div>
                           <div id="viewtable">
                              <div class="table-responsive">
                                 <table class="table border-0 star-student table-hover table-center mb-0 table-striped">
                                    <thead class="student-thread">
                                       <tr>
                                       
                                          <th>ID</th>
                                          <th>Name</th>
                                       
                                          <th>Gender</th>
                                          
                                          <th>Mobile Number</th>
                                          <th>Address</th>
                                          <th class="text-end">Action</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       {% for row in all_teacher %}
                                       <tr>
                                       
                                          <td>{{row.id}}</td>
                                          <td>
                                             <h2 class="table-avatar">
                                                <a href="teacher-details.html" class="avatar avatar-sm me-2"><img class="avatar-img rounded-circle" src="{{ row.user_id.user_image.url }}" alt="User Image"></a>
                                                <a href="teacher-details.html">{{row.teacher_name}}</a>
                                             </h2>
                                          </td>
                                       
                                          <td>{{row.teacher_gender}}</td>
                                       
                                          <td>{{row.teacher_mobile}}</td>
                                          <td>{{row.teacher_address}}</td>
                                          <td class="text-end">
                                             <div class="actions">
                                                <a href="javascript:;" class="btn btn-sm bg-success-light me-2">
                                                <i class="feather-eye"></i>
                                                </a>
                                                <a href="{% url 'selectTeacher' row.id %}" class="btn btn-sm bg-danger-light">
                                                <i class="feather-edit"></i>
                                                </a>
                                                <a onClick="return delRecord({{row.id}})" class="btn btn-sm bg-danger-light">
                                                   <i class="feather-trash"></i>
                                                   </a>
                                             </div>
                                          </td>
                                       </tr>
                                    {% endfor %}
                                    </tbody>
                                 </table>
                                 
                              </div>
                           
                              <ul class="pagination mb-4" style="margin-top: 30px;">
                                 <li class="page-item {% if all_teacher.has_previous == False %} disabled {% endif %}">
                                    <a class="page-link" onClick="return pageChange({{all_teacher.number|add:-1}})" tabindex="-1">Previous</a>
                                 </li>
                                 {% for p in total_page %}
                                 <li class="page-item {% if p == all_teacher.number %} active {% endif %}"><a class="page-link" onClick="return pageChange({{p}})">{{p}}</a></li>
                                 {% endfor %}
                              
                                 <li class="page-item {% if all_teacher.has_next == False %} disabled {% endif %}">
                                    <a class="page-link" onClick="return pageChange({{all_teacher.number|add:1}})">Next </a>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>          

<script>
   function pageChange(page)
   {
     
   }
</script>
<script>
   function delRecord(id)
   {
      Swal.fire({
         title: "Are you sure?",
         text: "You won't be able to revert this!",
         type: "warning",
         showCancelButton: !0,
         confirmButtonColor: "#3085d6",
         cancelButtonColor: "#d33",
         confirmButtonText: "Yes, delete it!",
         confirmButtonClass: "btn btn-primary",
         cancelButtonClass: "btn btn-danger ml-1",
         buttonsStyling: !1
     }).then(function(t) {
         if(t.value)
         {
            $.ajax({
               url:"{% url 'actionTeacher' %}",
               type:"post",
               data:{'id':id,
                     'teacher_action':'delete'},
               headers: {
                  'X-CSRFToken': '{{ csrf_token }}'
              },
               success: function()
                     {
                       
                        $('#viewtable').load(document.URL + ' #viewtable', function() {
                           // Reinitialize DataTable
                           $(".datatable1").dataTable();
                       });
                       Swal.fire({
                        title: "Good job!",
                        text: "Branch Delete Successfully",
                        icon: "success"
                      });
                    }
               });
         }
     })

    
      
   }
</script>

            {% endblock %}